<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>process - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/paychex/core" target="_blank" class="menu-item" id="repository" >Source Code</a></h2><h3>Modules</h3><ul><li><a href="module-data.html">data</a><ul class='methods'><li data-type='method'><a href="module-data.html#.createDataLayer">createDataLayer</a></li><li data-type='method'><a href="module-data.html#.createProxy">createProxy</a></li></ul></li><li><a href="module-data_utils.html">data/utils</a><ul class='methods'><li data-type='method'><a href="module-data_utils.html#.falloff">falloff</a></li><li data-type='method'><a href="module-data_utils.html#.tokenize">tokenize</a></li><li data-type='method'><a href="module-data_utils.html#.withAuthentication">withAuthentication</a></li><li data-type='method'><a href="module-data_utils.html#.withCache">withCache</a></li><li data-type='method'><a href="module-data_utils.html#.withConnectivity">withConnectivity</a></li><li data-type='method'><a href="module-data_utils.html#.withDiagnostics">withDiagnostics</a></li><li data-type='method'><a href="module-data_utils.html#.withHeaders">withHeaders</a></li><li data-type='method'><a href="module-data_utils.html#.withRetry">withRetry</a></li><li data-type='method'><a href="module-data_utils.html#.withSignal">withSignal</a></li><li data-type='method'><a href="module-data_utils.html#.withTransform">withTransform</a></li><li data-type='method'><a href="module-data_utils.html#.withXSRF">withXSRF</a></li></ul></li><li><a href="module-errors.html">errors</a><ul class='methods'><li data-type='method'><a href="module-errors.html#.error">error</a></li><li data-type='method'><a href="module-errors.html#.fatal">fatal</a></li><li data-type='method'><a href="module-errors.html#.ignore">ignore</a></li><li data-type='method'><a href="module-errors.html#.rethrow">rethrow</a></li></ul></li><li><a href="module-index.html">index</a><ul class='methods'><li data-type='method'><a href="module-index.html#~buffer">buffer</a></li><li data-type='method'><a href="module-index.html#~eventBus">eventBus</a></li><li data-type='method'><a href="module-index.html#~invokeIf">invokeIf</a></li><li data-type='method'><a href="module-index.html#~parallel">parallel</a></li><li data-type='method'><a href="module-index.html#~sequence">sequence</a></li></ul></li><li><a href="module-models.html">models</a><ul class='methods'><li data-type='method'><a href="module-models.html#.modelList">modelList</a></li><li data-type='method'><a href="module-models.html#.withActive">withActive</a></li><li data-type='method'><a href="module-models.html#.withFiltering">withFiltering</a></li><li data-type='method'><a href="module-models.html#.withGrouping">withGrouping</a></li><li data-type='method'><a href="module-models.html#.withOrdering">withOrdering</a></li><li data-type='method'><a href="module-models.html#.withPaging">withPaging</a></li><li data-type='method'><a href="module-models.html#.withSelection">withSelection</a></li><li data-type='method'><a href="module-models.html#.withUnique">withUnique</a></li><li data-type='method'><a href="module-models.html#.withUpdating">withUpdating</a></li></ul></li><li><a href="module-process.html">process</a><ul class='methods'><li data-type='method'><a href="module-process.html#.action">action</a></li><li data-type='method'><a href="module-process.html#.dependencies">dependencies</a></li><li data-type='method'><a href="module-process.html#.process">process</a></li><li data-type='method'><a href="module-process.html#.run">run</a></li><li data-type='method'><a href="module-process.html#.transitions">transitions</a></li></ul></li><li><a href="module-signals.html">signals</a><ul class='methods'><li data-type='method'><a href="module-signals.html#.autoReset">autoReset</a></li><li data-type='method'><a href="module-signals.html#.countdown">countdown</a></li><li data-type='method'><a href="module-signals.html#.manualReset">manualReset</a></li><li data-type='method'><a href="module-signals.html#.semaphore">semaphore</a></li></ul></li><li><a href="module-stores.html">stores</a><ul class='methods'><li data-type='method'><a href="module-stores.html#.memoryStore">memoryStore</a></li></ul></li><li><a href="module-stores_utils.html">stores/utils</a><ul class='methods'><li data-type='method'><a href="module-stores_utils.html#.asDataCache">asDataCache</a></li><li data-type='method'><a href="module-stores_utils.html#.days">days</a></li><li data-type='method'><a href="module-stores_utils.html#.hours">hours</a></li><li data-type='method'><a href="module-stores_utils.html#.minutes">minutes</a></li><li data-type='method'><a href="module-stores_utils.html#.weeks">weeks</a></li><li data-type='method'><a href="module-stores_utils.html#.withEncryption">withEncryption</a></li><li data-type='method'><a href="module-stores_utils.html#.withExpiration">withExpiration</a></li><li data-type='method'><a href="module-stores_utils.html#.withPrefix">withPrefix</a></li></ul></li><li><a href="module-test.html">test</a><ul class='methods'><li data-type='method'><a href="module-test.html#.spy">spy</a></li></ul></li><li><a href="module-tracker.html">tracker</a><ul class='methods'><li data-type='method'><a href="module-tracker.html#.createTracker">createTracker</a></li><li data-type='method'><a href="module-tracker.html#.withNesting">withNesting</a></li></ul></li><li><a href="module-tracker_utils.html">tracker/utils</a><ul class='methods'><li data-type='method'><a href="module-tracker_utils.html#~replacer">replacer</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-Promise.html">Promise</a></li></ul><h3>Events</h3><ul><li><a href="ModelList-ActiveModelList.html#~event:active-change">active-change</a></li><li><a href="ModelList.html#~event:items-add">items-add</a></li><li><a href="ModelList.html#~event:items-remove">items-remove</a></li><li><a href="ModelList-FilteredModelList.html#~event:filter-change">filter-change</a></li><li><a href="ModelList-GroupedModelList.html#~event:group-change">group-change</a></li><li><a href="ModelList-OrderedModelList.html#~event:order-change">order-change</a></li><li><a href="ModelList-PagedModelList.html#~event:page-change">page-change</a></li><li><a href="ModelList-SelectionModelList.html#~event:selection-change">selection-change</a></li><li><a href="ModelList-UniqueModelList.html#~event:unique-change">unique-change</a></li><li><a href="ModelList-UpdatingModelList.html#~event:items-update">items-update</a></li></ul><h3>Interfaces</h3><ul><li><a href="Action.html">Action</a><ul class='methods'><li data-type='method'><a href="Action.html#execute">execute</a></li><li data-type='method'><a href="Action.html#failure">failure</a></li><li data-type='method'><a href="Action.html#init">init</a></li><li data-type='method'><a href="Action.html#retry">retry</a></li><li data-type='method'><a href="Action.html#rollback">rollback</a></li><li data-type='method'><a href="Action.html#success">success</a></li></ul></li><li><a href="Cache.html">Cache</a><ul class='methods'><li data-type='method'><a href="Cache.html#get">get</a></li><li data-type='method'><a href="Cache.html#set">set</a></li></ul></li><li><a href="DataLayer.html">DataLayer</a><ul class='methods'><li data-type='method'><a href="DataLayer.html#createRequest">createRequest</a></li><li data-type='method'><a href="DataLayer.html#fetch">fetch</a></li><li data-type='method'><a href="DataLayer.html#setAdapter">setAdapter</a></li></ul></li><li><a href="EventBus.html">EventBus</a><ul class='methods'><li data-type='method'><a href="EventBus.html#fire">fire</a></li><li data-type='method'><a href="EventBus.html#on">on</a></li><li data-type='method'><a href="EventBus.html#one">one</a></li><li data-type='method'><a href="EventBus.html#resume">resume</a></li><li data-type='method'><a href="EventBus.html#stop">stop</a></li></ul></li><li><a href="ModelList.html">ModelList</a><ul class='methods'><li data-type='method'><a href="ModelList.html#add">add</a></li><li data-type='method'><a href="ModelList.html#clear">clear</a></li><li data-type='method'><a href="ModelList.html#items">items</a></li><li data-type='method'><a href="ModelList.html#remove">remove</a></li></ul></li><li><a href="ModelList-ActiveModelList.html">ActiveModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-ActiveModelList.html#active">active</a></li><li data-type='method'><a href="ModelList-ActiveModelList.html#next">next</a></li><li data-type='method'><a href="ModelList-ActiveModelList.html#prev">prev</a></li></ul></li><li><a href="ModelList-FilteredModelList.html">FilteredModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-FilteredModelList.html#filterBy">filterBy</a></li></ul></li><li><a href="ModelList-GroupedModelList.html">GroupedModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-GroupedModelList.html#groupBy">groupBy</a></li><li data-type='method'><a href="ModelList-GroupedModelList.html#groups">groups</a></li></ul></li><li><a href="ModelList-OrderedModelList.html">OrderedModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-OrderedModelList.html#orderBy">orderBy</a></li></ul></li><li><a href="ModelList-PagedModelList.html">PagedModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-PagedModelList.html#nextPage">nextPage</a></li><li data-type='method'><a href="ModelList-PagedModelList.html#pageIndex">pageIndex</a></li><li data-type='method'><a href="ModelList-PagedModelList.html#pageSize">pageSize</a></li><li data-type='method'><a href="ModelList-PagedModelList.html#prevPage">prevPage</a></li></ul></li><li><a href="ModelList-SelectionModelList.html">SelectionModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-SelectionModelList.html#selected">selected</a></li><li data-type='method'><a href="ModelList-SelectionModelList.html#toggle">toggle</a></li></ul></li><li><a href="ModelList-UniqueModelList.html">UniqueModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-UniqueModelList.html#uniqueBy">uniqueBy</a></li></ul></li><li><a href="ModelList-UpdatingModelList.html">UpdatingModelList</a><ul class='methods'><li data-type='method'><a href="ModelList-UpdatingModelList.html#merge">merge</a></li><li data-type='method'><a href="ModelList-UpdatingModelList.html#upsert">upsert</a></li></ul></li><li><a href="module-signals-AutoResetSignal.html">AutoResetSignal</a><ul class='methods'><li data-type='method'><a href="module-signals-AutoResetSignal.html#ready">ready</a></li><li data-type='method'><a href="module-signals-AutoResetSignal.html#reset">reset</a></li><li data-type='method'><a href="module-signals-AutoResetSignal.html#set">set</a></li></ul></li><li><a href="module-signals-CountdownSignal.html">CountdownSignal</a><ul class='methods'><li data-type='method'><a href="module-signals-CountdownSignal.html#decrement">decrement</a></li><li data-type='method'><a href="module-signals-CountdownSignal.html#increment">increment</a></li><li data-type='method'><a href="module-signals-CountdownSignal.html#ready">ready</a></li></ul></li><li><a href="module-signals-ManualResetSignal.html">ManualResetSignal</a><ul class='methods'><li data-type='method'><a href="module-signals-ManualResetSignal.html#ready">ready</a></li><li data-type='method'><a href="module-signals-ManualResetSignal.html#reset">reset</a></li><li data-type='method'><a href="module-signals-ManualResetSignal.html#set">set</a></li></ul></li><li><a href="module-signals-Semaphore.html">Semaphore</a><ul class='methods'><li data-type='method'><a href="module-signals-Semaphore.html#ready">ready</a></li><li data-type='method'><a href="module-signals-Semaphore.html#release">release</a></li></ul></li><li><a href="NestedTimingTracker.html">NestedTimingTracker</a><ul class='methods'><li data-type='method'><a href="NestedTimingTracker.html#child">child</a></li><li data-type='method'><a href="NestedTimingTracker.html#context">context</a></li><li data-type='method'><a href="NestedTimingTracker.html#error">error</a></li><li data-type='method'><a href="NestedTimingTracker.html#event">event</a></li><li data-type='method'><a href="NestedTimingTracker.html#start">start</a></li><li data-type='method'><a href="NestedTimingTracker.html#uuid">uuid</a></li></ul></li><li><a href="ProcessLogic.html">ProcessLogic</a><ul class='methods'><li data-type='method'><a href="ProcessLogic.html#contextFromArgs">contextFromArgs</a></li><li data-type='method'><a href="ProcessLogic.html#getInitialActions">getInitialActions</a></li><li data-type='method'><a href="ProcessLogic.html#getNextActions">getNextActions</a></li></ul></li><li><a href="Proxy.html">Proxy</a><ul class='methods'><li data-type='method'><a href="Proxy.html#apply">apply</a></li><li data-type='method'><a href="Proxy.html#url">url</a></li><li data-type='method'><a href="Proxy.html#use">use</a></li></ul></li><li><a href="Spy.html">Spy</a><ul class='methods'><li data-type='method'><a href="Spy.html#invokes">invokes</a></li><li data-type='method'><a href="Spy.html#onCall">onCall</a></li><li data-type='method'><a href="Spy.html#returns">returns</a></li><li data-type='method'><a href="Spy.html#throws">throws</a></li></ul></li><li><a href="SpyBehaviors.html">SpyBehaviors</a><ul class='methods'><li data-type='method'><a href="SpyBehaviors.html#invokes">invokes</a></li><li data-type='method'><a href="SpyBehaviors.html#returns">returns</a></li><li data-type='method'><a href="SpyBehaviors.html#throws">throws</a></li></ul></li><li><a href="Store.html">Store</a><ul class='methods'><li data-type='method'><a href="Store.html#delete">delete</a></li><li data-type='method'><a href="Store.html#get">get</a></li><li data-type='method'><a href="Store.html#set">set</a></li></ul></li><li><a href="Tracker.html">Tracker</a><ul class='methods'><li data-type='method'><a href="Tracker.html#child">child</a></li><li data-type='method'><a href="Tracker.html#context">context</a></li><li data-type='method'><a href="Tracker.html#error">error</a></li><li data-type='method'><a href="Tracker.html#event">event</a></li><li data-type='method'><a href="Tracker.html#start">start</a></li><li data-type='method'><a href="Tracker.html#uuid">uuid</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">process</h1>
    

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    
        <div class="container-overview">
        
            
                <div class="description usertext"><p>Provides utilities for running complex, multi-step asynchronous processes.</p>
<p><strong>Overview</strong></p>
<p>A process consists of 2 things:</p>
<ul>
<li>a collection of actions to invoke</li>
<li>the logic for picking which actions should run at any given time</li>
</ul>
<p>This abstraction enables both workflow-style processes (multiple steps running in
parallel, with some steps dependent on the completion of earlier steps) as well as
state machine-style processes (one state active at a time, with the next state
determined by examining the process' current set of conditions).</p>
<p>You can even set up custom process logic by providing your own <a href="ProcessLogic.html">ProcessLogic</a> instance
to the <a href="module-process.html#.process">process</a> method. See the example <a href="ProcessLogic.html">here</a>.</p>
<p><strong>Action Methods</strong></p>
<p>Each <a href="Action.html">Action</a> in a process can implement methods that the process will
invoke at the appropriate time. These methods can be broken down into 2 categories:</p>
<ol>
<li>exec methods</li>
<li>post-exec methods</li>
</ol>
<p>The &quot;exec&quot; methods are run when the action is invoked. These include <a href="Action.html#init">init</a>,
<a href="Action.html#execute">execute</a> and <a href="Action.html#retry">retry</a>.</p>
<p>The &quot;post-exec&quot; methods are run after the process completes. These include
<a href="Action.html#rollback">rollback</a>, <a href="Action.html#failure">failure</a>, and
<a href="Action.html#success">success</a>.</p>
<p><strong>IMPORTANT!</strong> The post-exec methods are run <em>in parallel</em> and <em>at the same time</em> that
the <a href="global.html#ExecutionPromise">ExecutionPromise</a> returned by <a href="global.html#ProcessStart">ProcessStart</a> is resolved or rejected,
meaning there is no guaranteed order between your process callbacks and your actions'
post-exec methods.</p></div>
            

            
                




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="process_index.js.html">process/index.js</a>, <a href="process_index.js.html#line16">line 16</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
































            
        
        </div>
    

    

    

    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".action"><span class="type-signature">(static) </span>action<span class="signature">(name, api)</span><span class="type-signature"> &rarr; {<a href="Action.html">Action</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="process_index.js.html">process/index.js</a>, <a href="process_index.js.html#line282">line 282</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Creates a fully realized <a href="Action.html">Action</a> for use within a <a href="module-process.html#.process">process</a>.</p>
</div>









    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>import { modelList } from '@paychex/core/models';import { action, process, transitions } from '@paychex/core/process';async function loadData() {  // make a data call}function processResults() {  // access this.results.load  // value returned will be assigned  // to this.results.process}const actions = modelList();actions.add(action('load', loadData));actions.add(action('process', processResults));// "load" should transition to "process" automatically:const criteria = [ ['load', 'process'] ];export const start = process('get data', actions, transitions(criteria));</code></pre>

    <pre class="prettyprint"><code>import { modelList } from '@paychex/core/models';import { action, process, transitions } from '@paychex/core/process';export const start = process('double', modelList(  action('double', {    someVariable: 123,    execute() {      return this.someVariable * 2;    },    success() {      console.log(this.results);    }  })), transitions());</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the process action.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>api</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Action.html#execute">Action#execute</a></span>
|

<span class="param-type"><a href="Action.html">Action</a></span>


            
            </td>

            

            

            <td class="description last"><p>The execute method or partial <a href="Action.html">Action</a> to fill out.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Action.html">Action</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".dependencies"><span class="type-signature">(static) </span>dependencies<span class="signature">(deps<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="ProcessLogic.html">ProcessLogic</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="process_index.js.html">process/index.js</a>, <a href="process_index.js.html#line824">line 824</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Creates a <a href="ProcessLogic.html">ProcessLogic</a> instance that can be passed to the <a href="module-process.html#.process">process</a>
method. When started, the process will use the dependency map to determine which <a href="Action.html">actions</a>
can be invoked immediately (having no dependencies) and which should be run when their dependent actions
have completed.</p>
<p>This method results in the process running like a <em>workflow</em>, with some actions run in parallel
and the execution order of actions dependent upon the stated dependencies.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import { modelList } from '@paychex/core/models';import { action, process, dependencies } from '@paychex/core/process';const actions = modelList(  action('start', function execute() {    console.log('args:', this.args);  }),  action('parallel 1', function execute() {    console.log('in', this.name);  }),  action('parallel 2', function execute() {    console.log('in', this.name);  }),}));const order = dependencies({  'parallel 1': ['start'],  'parallel 2': ['start'],});export const dispatch = process('my workflow', actions, order);// USAGE:// dispatch(123, 'abc');</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>deps</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ProcessDependencyMap">ProcessDependencyMap</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last"><p>The dependency map that should be used
to determine the initial and follow-up <a href="Action.html">actions</a> to invoke in this
process.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A ProcessLogic instance that <a href="module-process.html#.process">process</a>
can use to determine how to run the <a href="ModelList.html">ModelList</a> <a href="Action.html">actions</a> it was provided.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="ProcessLogic.html">ProcessLogic</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".process"><span class="type-signature">(static) </span>process<span class="signature">(name, actions, logic)</span><span class="type-signature"> &rarr; {<a href="global.html#ProcessStart">ProcessStart</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="process_index.js.html">process/index.js</a>, <a href="process_index.js.html#line676">line 676</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Returns a method you can invoke to begin a complex asynchronous process.
The order of actions taken is determined using the <a href="ProcessLogic.html">ProcessLogic</a>
object passed as the last argument. You can use the built-in dependencies
and transitions logic factories to create this object for you,
or supply your own logic to create custom process behaviors.</p>
</div>









    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// workflowimport { rethrow } from '@paychex/core/errors';import { modelList } from '@paychex/core/models';import { action, process, dependencies } from '@paychex/core/process';import { loadUserInfo } from '../data/user';import { loadClientData } from '../data/clients';import { start } from '../path/to/machine';const actions = modelList();actions.add(action('loadUserInfo', loadUserInfo));actions.add(action('loadClientData', {  async execute() {    const clientId = this.args[0];    return await loadClientData(clientId)      .catch(rethrow({ clientId }));  }}));actions.add(action('merge', {  execute() {    const user = this.results.loadUserInfo;    const clients = this.results.loadClientData;    return Object.assign({}, user, { clients });  }}));actions.add(action('eula', function execute() {  const conditions = this.results;  return start('initial', conditions);}));export const dispatch = process('load user clients', actions, dependencies({  'eula': ['merge'],  'merge': ['loadUserInfo', 'loadClientData'],}));// USAGE: dispatch(clientId);</code></pre>

    <pre class="prettyprint"><code>// state machineimport { tracker } from '~/tracking';import { action, process, transitions } from '@paychex/core/process';import { rethrow, fatal, ignore } from '@paychex/core/errors';import { showDialog } from '../some/dialog';import { dispatch } from '../some/workflow';const actions = new Set();// if no start state is explicitly passed to the start()// method then this first action will be used automaticallyactions.add(action('start', {  success() {    tracker.event(`${this.process} succeeded`);  },  failure(err) {    Object.assign(err, fatal());    tracker.error(err);  }}));actions.add(action('show dialog', {  execute() {    return showDialog('accept.cookies');  }}));// we can dispatch a workflow in one of our actionsactions.add(action('run workflow', function execute() {  const cookiesEnabled = this.results['show dialog'];  const ignoreError = rethrow(ignore({ cookiesEnabled }));  return dispatch(cookiesEnabled).catch(ignoreError);}));actions.add(action('stop', function() {  this.stop(); // stop the machine}));const criteria = [  // show the dialog after starting the machine  ['start', 'show dialog'],  // only run the workflow if the user has not  // logged in within the past 2 weeks  ['show dialog', 'run workflow', function notRecentlyLoggedIn() {    const TWO_WEEKS = 1000 * 60 * 60 * 24 * 7 * 2;    const lastLogin = Date.parse(localStorage.getItem('lastLogin'));    return lastLogin &lt; Date.now() - TWO_WEEKS;  }],  // only if the above transition's condition returns  // false (i.e. the user has recently logged in) will  // this next transition will be evaluated; and since  // this next transition always returns true, the machine  // will always have a path forward  ['show dialog', 'stop'],  // if we did get into the "run workflow" state, make  // sure we stop the workflow afterwards  ['run workflow', 'stop']];export const start = process('intro', actions, transitions(criteria));</code></pre>

    <pre class="prettyprint"><code>// workflow used within a sagaimport { call, takeEvery } from 'redux-saga/effects';import { addSaga } from '~/store';import { action, process, dependencies } from '@paychex/core/process';const actions = [  action('a', () => console.log('a')),  action('b', () => console.log('b')),  action('c', () => console.log('c')),];const dispatch = process('saga handler', actions, dependencies({  b: ['a'],  c: ['b', 'a']}));addSaga(function* saga() {  yield takeEvery('some-action', function* run(action) {    yield call(dispatch, action.payload);  });});</code></pre>

    <pre class="prettyprint"><code>// state machine used within a sagaimport { call, takeEvery } from 'redux-saga/effects';import { addSaga } from '~/store';import { action, process, transitions } from '@paychex/core/process';const actions = [  action('a', () => console.log('a')),  action('b', () => console.log('b')),  action('c', function() { this.stop(); }),];const start = process('saga handler', actions, transitions([  ['a', 'b'],  ['b', 'c']]));addSaga(function* saga() {  yield takeEvery('some-action', function* run(action) {    const conditions = action.payload;    yield call(start, 'a', conditions);  });});</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the process to run.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>actions</code></td>
            

            <td class="type">
            
                
<span class="param-type">Iterable.&lt;<a href="Action.html">Action</a>></span>


            
            </td>

            

            

            <td class="description last"><p>An interable collection (e.g. Set, array, or <a href="ModelList.html">ModelList</a>) of <a href="Action.html">Action</a>s to run.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>logic</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="ProcessLogic.html">ProcessLogic</a></span>


            
            </td>

            

            

            <td class="description last"><p>The logic that determines how to start and continue a process.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A method you can invoke to begin the process. The arguments will
depend in part on the <a href="ProcessLogic.html">ProcessLogic</a> object you passed.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#ProcessStart">ProcessStart</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".run"><span class="type-signature">(static) </span>run<span class="signature">(action, context, initialize<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="process_index.js.html">process/index.js</a>, <a href="process_index.js.html#line351">line 351</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Utility method to run a single <a href="Action.html">Action</a> in isolation.
This method is used internally by <a href="module-process.html#.process">process</a>
but is made available publicly for unusual situations.</p>
<p><strong>NOTE:</strong> The success and failure methods will not be run using this
method since their invocation depends on whether or not a collection
of Actions has completed successfully. If you want to invoke
the success and failure methods, you should do so manually. See the
example for details.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import { action, run } from '@paychex/core/process';const step = action('something', {  count: 0,  init() { this.count = 0; },  execute() {    console.log(this.args);    this.count = this.count + 1;    return this.count * this.factor;  },  success() {}, // must be invoked manually  failure(err) {}, // must be invoked manually});export async function invokeSomething(...args) {  const context = { args, factor: 3 };  const promise = run(step, context);  // invoke success and failure methods  // on separate promise chain than the  // one we return to callers; we don't  // care if these fail and we don't want  // their return values to override the  // return value from the execute method  promise.then(    () => step.success.call(context),    (err) => step.failure.call(context, err)  );  return await promise; // value returned by execute()}</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>action</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Action.html">Action</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The Action whose methods should be invoked.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>context</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ProcessContext">ProcessContext</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The context accessed using <code>this</code> within an action method.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>initialize</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last"><p>Whether to run the Action's init method.</p></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id=".transitions"><span class="type-signature">(static) </span>transitions<span class="signature">(criteria<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="ProcessLogic.html">ProcessLogic</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="process_index.js.html">process/index.js</a>, <a href="process_index.js.html#line895">line 895</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Creates a <a href="ProcessLogic.html">ProcessLogic</a> instance that can be passed to the <a href="module-process.html#.process">process</a>
method. When started, the process will use the transition criteria to determine which <a href="Action.html">actions</a>
can be invoked based on the current set of conditions as passed to
the <a href="global.html#ProcessStart">start</a> method <em>or</em> through calls to <a href="global.html#ExecutionUpdate">update</a>.</p>
<p><strong>NOTE:</strong> A process using transitions logic will not stop until and unless one of the following occurs:</p>
<ul>
<li>someone invokes the <code>stop()</code> method</li>
<li>someone invokes the <code>cancel()</code> method</li>
<li>a <a href="Action.html">Action</a> method throws an Error or returns a rejected Promise</li>
</ul>
<p>This method results in the process running like a <em>state machine</em>, with one action allowed to run at any
time and the next action determined using the current conditions and the given transition logic.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import { modelList } from '@paychex/core/models';import { action, process, transitions } from '@paychex/core/process';const states = modelList();states.add(action('start', () => console.log('start')));states.add(action('next',  () => console.log('next')));states.add(action('stop',  function() {  this.stop();}));const criteria = [  ['start', 'next'],  ['next', 'stop']];export const start = process('my machine', states, transitions(criteria));// USAGE:start();start('next');start('stop', { initial: 'conditions' });// you can also just provide initial conditions;// the first action will still be used as the start actionstart({ initial: 'conditions' });</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>criteria</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ProcessTransitions">ProcessTransitions</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>[]</code>
                
                </td>
            

            <td class="description last"><p>The transitions that should be used
to determine the initial and follow-up <a href="Action.html">actions</a> to invoke in this
process.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A ProcessLogic instance that <a href="module-process.html#.process">process</a>
can use to determine how to run the <a href="ModelList.html">ModelList</a> <a href="Action.html">actions</a> it was provided.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="ProcessLogic.html">ProcessLogic</a></span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
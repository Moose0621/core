<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>types/tracker.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/paychex/core" target="_blank" class="menu-item" id="repository" >Source Code</a></h2><h3>Classes</h3><ul><li><a href="Action.html">Action</a><ul class='methods'><li data-type='method'><a href="Action.html#execute">execute</a></li><li data-type='method'><a href="Action.html#failure">failure</a></li><li data-type='method'><a href="Action.html#init">init</a></li><li data-type='method'><a href="Action.html#retry">retry</a></li><li data-type='method'><a href="Action.html#rollback">rollback</a></li><li data-type='method'><a href="Action.html#success">success</a></li></ul></li><li><a href="ActiveModelList.html">ActiveModelList</a><ul class='methods'><li data-type='method'><a href="ActiveModelList.html#active">active</a></li><li data-type='method'><a href="ActiveModelList.html#add">add</a></li><li data-type='method'><a href="ActiveModelList.html#clear">clear</a></li><li data-type='method'><a href="ActiveModelList.html#fire">fire</a></li><li data-type='method'><a href="ActiveModelList.html#items">items</a></li><li data-type='method'><a href="ActiveModelList.html#next">next</a></li><li data-type='method'><a href="ActiveModelList.html#on">on</a></li><li data-type='method'><a href="ActiveModelList.html#one">one</a></li><li data-type='method'><a href="ActiveModelList.html#prev">prev</a></li><li data-type='method'><a href="ActiveModelList.html#remove">remove</a></li><li data-type='method'><a href="ActiveModelList.html#resume">resume</a></li><li data-type='method'><a href="ActiveModelList.html#stop">stop</a></li></ul></li><li><a href="AutoResetSignal.html">AutoResetSignal</a><ul class='methods'><li data-type='method'><a href="AutoResetSignal.html#ready">ready</a></li><li data-type='method'><a href="AutoResetSignal.html#reset">reset</a></li><li data-type='method'><a href="AutoResetSignal.html#set">set</a></li></ul></li><li><a href="Cache.html">Cache</a><ul class='methods'><li data-type='method'><a href="Cache.html#get">get</a></li><li data-type='method'><a href="Cache.html#set">set</a></li></ul></li><li><a href="CountdownSignal.html">CountdownSignal</a><ul class='methods'><li data-type='method'><a href="CountdownSignal.html#decrement">decrement</a></li><li data-type='method'><a href="CountdownSignal.html#increment">increment</a></li><li data-type='method'><a href="CountdownSignal.html#ready">ready</a></li></ul></li><li><a href="DataDefinition.html">DataDefinition</a></li><li><a href="DataLayer.html">DataLayer</a><ul class='methods'><li data-type='method'><a href="DataLayer.html#createRequest">createRequest</a></li><li data-type='method'><a href="DataLayer.html#fetch">fetch</a></li><li data-type='method'><a href="DataLayer.html#setAdapter">setAdapter</a></li></ul></li><li><a href="EncryptionConfiguration.html">EncryptionConfiguration</a></li><li><a href="EventBus.html">EventBus</a><ul class='methods'><li data-type='method'><a href="EventBus.html#fire">fire</a></li><li data-type='method'><a href="EventBus.html#on">on</a></li><li data-type='method'><a href="EventBus.html#one">one</a></li><li data-type='method'><a href="EventBus.html#resume">resume</a></li><li data-type='method'><a href="EventBus.html#stop">stop</a></li></ul></li><li><a href="ExecutionPromise.html">ExecutionPromise</a></li><li><a href="FilteredModelList.html">FilteredModelList</a><ul class='methods'><li data-type='method'><a href="FilteredModelList.html#add">add</a></li><li data-type='method'><a href="FilteredModelList.html#clear">clear</a></li><li data-type='method'><a href="FilteredModelList.html#filterBy">filterBy</a></li><li data-type='method'><a href="FilteredModelList.html#fire">fire</a></li><li data-type='method'><a href="FilteredModelList.html#items">items</a></li><li data-type='method'><a href="FilteredModelList.html#on">on</a></li><li data-type='method'><a href="FilteredModelList.html#one">one</a></li><li data-type='method'><a href="FilteredModelList.html#remove">remove</a></li><li data-type='method'><a href="FilteredModelList.html#resume">resume</a></li><li data-type='method'><a href="FilteredModelList.html#stop">stop</a></li></ul></li><li><a href="GroupedModelList.html">GroupedModelList</a><ul class='methods'><li data-type='method'><a href="GroupedModelList.html#add">add</a></li><li data-type='method'><a href="GroupedModelList.html#clear">clear</a></li><li data-type='method'><a href="GroupedModelList.html#fire">fire</a></li><li data-type='method'><a href="GroupedModelList.html#groupBy">groupBy</a></li><li data-type='method'><a href="GroupedModelList.html#groups">groups</a></li><li data-type='method'><a href="GroupedModelList.html#items">items</a></li><li data-type='method'><a href="GroupedModelList.html#on">on</a></li><li data-type='method'><a href="GroupedModelList.html#one">one</a></li><li data-type='method'><a href="GroupedModelList.html#remove">remove</a></li><li data-type='method'><a href="GroupedModelList.html#resume">resume</a></li><li data-type='method'><a href="GroupedModelList.html#stop">stop</a></li></ul></li><li><a href="InvocationData.html">InvocationData</a></li><li><a href="ManualResetSignal.html">ManualResetSignal</a><ul class='methods'><li data-type='method'><a href="ManualResetSignal.html#ready">ready</a></li><li data-type='method'><a href="ManualResetSignal.html#reset">reset</a></li><li data-type='method'><a href="ManualResetSignal.html#set">set</a></li></ul></li><li><a href="Message.html">Message</a></li><li><a href="MetaData.html">MetaData</a></li><li><a href="ModelList.html">ModelList</a><ul class='methods'><li data-type='method'><a href="ModelList.html#add">add</a></li><li data-type='method'><a href="ModelList.html#clear">clear</a></li><li data-type='method'><a href="ModelList.html#fire">fire</a></li><li data-type='method'><a href="ModelList.html#items">items</a></li><li data-type='method'><a href="ModelList.html#on">on</a></li><li data-type='method'><a href="ModelList.html#one">one</a></li><li data-type='method'><a href="ModelList.html#remove">remove</a></li><li data-type='method'><a href="ModelList.html#resume">resume</a></li><li data-type='method'><a href="ModelList.html#stop">stop</a></li></ul></li><li><a href="NestedStartResult.html">NestedStartResult</a></li><li><a href="NestedTimingTracker.html">NestedTimingTracker</a><ul class='methods'><li data-type='method'><a href="NestedTimingTracker.html#child">child</a></li><li data-type='method'><a href="NestedTimingTracker.html#context">context</a></li><li data-type='method'><a href="NestedTimingTracker.html#error">error</a></li><li data-type='method'><a href="NestedTimingTracker.html#event">event</a></li><li data-type='method'><a href="NestedTimingTracker.html#start">start</a></li><li data-type='method'><a href="NestedTimingTracker.html#uuid">uuid</a></li></ul></li><li><a href="OrderedModelList.html">OrderedModelList</a><ul class='methods'><li data-type='method'><a href="OrderedModelList.html#add">add</a></li><li data-type='method'><a href="OrderedModelList.html#clear">clear</a></li><li data-type='method'><a href="OrderedModelList.html#fire">fire</a></li><li data-type='method'><a href="OrderedModelList.html#items">items</a></li><li data-type='method'><a href="OrderedModelList.html#on">on</a></li><li data-type='method'><a href="OrderedModelList.html#one">one</a></li><li data-type='method'><a href="OrderedModelList.html#orderBy">orderBy</a></li><li data-type='method'><a href="OrderedModelList.html#remove">remove</a></li><li data-type='method'><a href="OrderedModelList.html#resume">resume</a></li><li data-type='method'><a href="OrderedModelList.html#stop">stop</a></li></ul></li><li><a href="PagedModelList.html">PagedModelList</a><ul class='methods'><li data-type='method'><a href="PagedModelList.html#add">add</a></li><li data-type='method'><a href="PagedModelList.html#clear">clear</a></li><li data-type='method'><a href="PagedModelList.html#fire">fire</a></li><li data-type='method'><a href="PagedModelList.html#items">items</a></li><li data-type='method'><a href="PagedModelList.html#nextPage">nextPage</a></li><li data-type='method'><a href="PagedModelList.html#on">on</a></li><li data-type='method'><a href="PagedModelList.html#one">one</a></li><li data-type='method'><a href="PagedModelList.html#pageIndex">pageIndex</a></li><li data-type='method'><a href="PagedModelList.html#pageSize">pageSize</a></li><li data-type='method'><a href="PagedModelList.html#prevPage">prevPage</a></li><li data-type='method'><a href="PagedModelList.html#remove">remove</a></li><li data-type='method'><a href="PagedModelList.html#resume">resume</a></li><li data-type='method'><a href="PagedModelList.html#stop">stop</a></li></ul></li><li><a href="ProcessContext.html">ProcessContext</a><ul class='methods'><li data-type='method'><a href="ProcessContext.html#cancel">cancel</a></li><li data-type='method'><a href="ProcessContext.html#stop">stop</a></li><li data-type='method'><a href="ProcessContext.html#update">update</a></li></ul></li><li><a href="ProcessLogic.html">ProcessLogic</a><ul class='methods'><li data-type='method'><a href="ProcessLogic.html#contextFromArgs">contextFromArgs</a></li><li data-type='method'><a href="ProcessLogic.html#getInitialActions">getInitialActions</a></li><li data-type='method'><a href="ProcessLogic.html#getNextActions">getNextActions</a></li></ul></li><li><a href="ProcessTransition.html">ProcessTransition</a></li><li><a href="ProcessTransitions.html">ProcessTransitions</a></li><li><a href="Proxy.html">Proxy</a><ul class='methods'><li data-type='method'><a href="Proxy.html#apply">apply</a></li><li data-type='method'><a href="Proxy.html#url">url</a></li><li data-type='method'><a href="Proxy.html#use">use</a></li></ul></li><li><a href="ProxyRule.html">ProxyRule</a></li><li><a href="Request.html">Request</a></li><li><a href="Response.html">Response</a></li><li><a href="SelectionModelList.html">SelectionModelList</a><ul class='methods'><li data-type='method'><a href="SelectionModelList.html#add">add</a></li><li data-type='method'><a href="SelectionModelList.html#clear">clear</a></li><li data-type='method'><a href="SelectionModelList.html#fire">fire</a></li><li data-type='method'><a href="SelectionModelList.html#items">items</a></li><li data-type='method'><a href="SelectionModelList.html#on">on</a></li><li data-type='method'><a href="SelectionModelList.html#one">one</a></li><li data-type='method'><a href="SelectionModelList.html#remove">remove</a></li><li data-type='method'><a href="SelectionModelList.html#resume">resume</a></li><li data-type='method'><a href="SelectionModelList.html#selected">selected</a></li><li data-type='method'><a href="SelectionModelList.html#stop">stop</a></li><li data-type='method'><a href="SelectionModelList.html#toggle">toggle</a></li></ul></li><li><a href="Semaphore.html">Semaphore</a><ul class='methods'><li data-type='method'><a href="Semaphore.html#ready">ready</a></li><li data-type='method'><a href="Semaphore.html#release">release</a></li></ul></li><li><a href="Spy.html">Spy</a><ul class='methods'><li data-type='method'><a href="Spy.html#invokes">invokes</a></li><li data-type='method'><a href="Spy.html#onCall">onCall</a></li><li data-type='method'><a href="Spy.html#returns">returns</a></li><li data-type='method'><a href="Spy.html#throws">throws</a></li></ul></li><li><a href="SpyBehaviors.html">SpyBehaviors</a><ul class='methods'><li data-type='method'><a href="SpyBehaviors.html#invokes">invokes</a></li><li data-type='method'><a href="SpyBehaviors.html#returns">returns</a></li><li data-type='method'><a href="SpyBehaviors.html#throws">throws</a></li></ul></li><li><a href="SpyCall.html">SpyCall</a></li><li><a href="Store.html">Store</a><ul class='methods'><li data-type='method'><a href="Store.html#delete">delete</a></li><li data-type='method'><a href="Store.html#get">get</a></li><li data-type='method'><a href="Store.html#set">set</a></li></ul></li><li><a href="Tracker.html">Tracker</a><ul class='methods'><li data-type='method'><a href="Tracker.html#child">child</a></li><li data-type='method'><a href="Tracker.html#context">context</a></li><li data-type='method'><a href="Tracker.html#error">error</a></li><li data-type='method'><a href="Tracker.html#event">event</a></li><li data-type='method'><a href="Tracker.html#start">start</a></li><li data-type='method'><a href="Tracker.html#uuid">uuid</a></li></ul></li><li><a href="TrackingInfo.html">TrackingInfo</a></li><li><a href="Transformer.html">Transformer</a><ul class='methods'><li data-type='method'><a href="Transformer.html#request">request</a></li><li data-type='method'><a href="Transformer.html#response">response</a></li></ul></li><li><a href="UniqueModelList.html">UniqueModelList</a><ul class='methods'><li data-type='method'><a href="UniqueModelList.html#add">add</a></li><li data-type='method'><a href="UniqueModelList.html#clear">clear</a></li><li data-type='method'><a href="UniqueModelList.html#fire">fire</a></li><li data-type='method'><a href="UniqueModelList.html#items">items</a></li><li data-type='method'><a href="UniqueModelList.html#on">on</a></li><li data-type='method'><a href="UniqueModelList.html#one">one</a></li><li data-type='method'><a href="UniqueModelList.html#remove">remove</a></li><li data-type='method'><a href="UniqueModelList.html#resume">resume</a></li><li data-type='method'><a href="UniqueModelList.html#stop">stop</a></li><li data-type='method'><a href="UniqueModelList.html#uniqueBy">uniqueBy</a></li></ul></li><li><a href="UpdatingModelList.html">UpdatingModelList</a><ul class='methods'><li data-type='method'><a href="UpdatingModelList.html#add">add</a></li><li data-type='method'><a href="UpdatingModelList.html#clear">clear</a></li><li data-type='method'><a href="UpdatingModelList.html#fire">fire</a></li><li data-type='method'><a href="UpdatingModelList.html#items">items</a></li><li data-type='method'><a href="UpdatingModelList.html#merge">merge</a></li><li data-type='method'><a href="UpdatingModelList.html#on">on</a></li><li data-type='method'><a href="UpdatingModelList.html#one">one</a></li><li data-type='method'><a href="UpdatingModelList.html#remove">remove</a></li><li data-type='method'><a href="UpdatingModelList.html#resume">resume</a></li><li data-type='method'><a href="UpdatingModelList.html#stop">stop</a></li><li data-type='method'><a href="UpdatingModelList.html#uniqueBy">uniqueBy</a></li><li data-type='method'><a href="UpdatingModelList.html#upsert">upsert</a></li></ul></li><li><a href="XSRFOptions.html">XSRFOptions</a></li></ul><h3>Modules</h3><ul><li><a href="module-data.html">data</a><ul class='methods'><li data-type='method'><a href="module-data.html#.createDataLayer">createDataLayer</a></li><li data-type='method'><a href="module-data.html#.createProxy">createProxy</a></li></ul></li><li><a href="module-data_utils.html">data/utils</a><ul class='methods'><li data-type='method'><a href="module-data_utils.html#.falloff">falloff</a></li><li data-type='method'><a href="module-data_utils.html#.tokenize">tokenize</a></li><li data-type='method'><a href="module-data_utils.html#.withAuthentication">withAuthentication</a></li><li data-type='method'><a href="module-data_utils.html#.withCache">withCache</a></li><li data-type='method'><a href="module-data_utils.html#.withConnectivity">withConnectivity</a></li><li data-type='method'><a href="module-data_utils.html#.withDiagnostics">withDiagnostics</a></li><li data-type='method'><a href="module-data_utils.html#.withHeaders">withHeaders</a></li><li data-type='method'><a href="module-data_utils.html#.withRetry">withRetry</a></li><li data-type='method'><a href="module-data_utils.html#.withSignal">withSignal</a></li><li data-type='method'><a href="module-data_utils.html#.withTransform">withTransform</a></li><li data-type='method'><a href="module-data_utils.html#.withXSRF">withXSRF</a></li></ul></li><li><a href="module-errors.html">errors</a><ul class='methods'><li data-type='method'><a href="module-errors.html#.error">error</a></li><li data-type='method'><a href="module-errors.html#.fatal">fatal</a></li><li data-type='method'><a href="module-errors.html#.ignore">ignore</a></li><li data-type='method'><a href="module-errors.html#.rethrow">rethrow</a></li></ul></li><li><a href="module-index.html">index</a><ul class='methods'><li data-type='method'><a href="module-index.html#~buffer">buffer</a></li><li data-type='method'><a href="module-index.html#~eventBus">eventBus</a></li><li data-type='method'><a href="module-index.html#~invokeIf">invokeIf</a></li><li data-type='method'><a href="module-index.html#~parallel">parallel</a></li><li data-type='method'><a href="module-index.html#~sequence">sequence</a></li></ul></li><li><a href="module-models.html">models</a><ul class='methods'><li data-type='method'><a href="module-models.html#.modelList">modelList</a></li><li data-type='method'><a href="module-models.html#.withActive">withActive</a></li><li data-type='method'><a href="module-models.html#.withFiltering">withFiltering</a></li><li data-type='method'><a href="module-models.html#.withGrouping">withGrouping</a></li><li data-type='method'><a href="module-models.html#.withOrdering">withOrdering</a></li><li data-type='method'><a href="module-models.html#.withPaging">withPaging</a></li><li data-type='method'><a href="module-models.html#.withSelection">withSelection</a></li><li data-type='method'><a href="module-models.html#.withUnique">withUnique</a></li><li data-type='method'><a href="module-models.html#.withUpdating">withUpdating</a></li></ul></li><li><a href="module-process.html">process</a><ul class='methods'><li data-type='method'><a href="module-process.html#.action">action</a></li><li data-type='method'><a href="module-process.html#.dependencies">dependencies</a></li><li data-type='method'><a href="module-process.html#.process">process</a></li><li data-type='method'><a href="module-process.html#.run">run</a></li><li data-type='method'><a href="module-process.html#.transitions">transitions</a></li></ul></li><li><a href="module-signals.html">signals</a><ul class='methods'><li data-type='method'><a href="module-signals.html#.autoReset">autoReset</a></li><li data-type='method'><a href="module-signals.html#.countdown">countdown</a></li><li data-type='method'><a href="module-signals.html#.manualReset">manualReset</a></li><li data-type='method'><a href="module-signals.html#.semaphore">semaphore</a></li></ul></li><li><a href="module-stores.html">stores</a><ul class='methods'><li data-type='method'><a href="module-stores.html#.memoryStore">memoryStore</a></li></ul></li><li><a href="module-stores_utils.html">stores/utils</a><ul class='methods'><li data-type='method'><a href="module-stores_utils.html#.asDataCache">asDataCache</a></li><li data-type='method'><a href="module-stores_utils.html#.days">days</a></li><li data-type='method'><a href="module-stores_utils.html#.hours">hours</a></li><li data-type='method'><a href="module-stores_utils.html#.minutes">minutes</a></li><li data-type='method'><a href="module-stores_utils.html#.weeks">weeks</a></li><li data-type='method'><a href="module-stores_utils.html#.withEncryption">withEncryption</a></li><li data-type='method'><a href="module-stores_utils.html#.withExpiration">withExpiration</a></li><li data-type='method'><a href="module-stores_utils.html#.withPrefix">withPrefix</a></li></ul></li><li><a href="module-test.html">test</a><ul class='methods'><li data-type='method'><a href="module-test.html#.spy">spy</a></li></ul></li><li><a href="module-tracker.html">tracker</a><ul class='methods'><li data-type='method'><a href="module-tracker.html#.createTracker">createTracker</a></li><li data-type='method'><a href="module-tracker.html#.withNesting">withNesting</a></li></ul></li><li><a href="module-tracker_utils.html">tracker/utils</a><ul class='methods'><li data-type='method'><a href="module-tracker_utils.html#~withReplacement">withReplacement</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-Promise.html">Promise</a></li></ul><h3>Events</h3><ul><li><a href="ActiveModelList.html#~event:active-change">active-change</a></li><li><a href="FilteredModelList.html#~event:filter-change">filter-change</a></li><li><a href="GroupedModelList.html#~event:group-change">group-change</a></li><li><a href="ModelList.html#~event:items-add">items-add</a></li><li><a href="ModelList.html#~event:items-remove">items-remove</a></li><li><a href="OrderedModelList.html#~event:order-change">order-change</a></li><li><a href="PagedModelList.html#~event:page-change">page-change</a></li><li><a href="SelectionModelList.html#~event:selection-change">selection-change</a></li><li><a href="UniqueModelList.html#~event:unique-change">unique-change</a></li><li><a href="UpdatingModelList.html#~event:items-update">items-update</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Adapter">Adapter</a></li><li><a href="global.html#Fetch">Fetch</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">types/tracker.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Encapsulates tracking information. The {@link TrackingSubscriber}
 * will be invoked with an instance for each {@link Tracker} (or child
 * Tracker) method invoked.
 *
 * @class
 * @global
 * @hideconstructor
 */
export class TrackingInfo {

    /**
     * A random [RFC 4122 UUID]{@link https://tools.ietf.org/html/rfc4122#section-4.4}.
     *
     * @memberof TrackingInfo#
     */
    id = ''

    /**
     * The type of tracking information provided in this object. Either `'event'`, `'timer'`, or `'error'`.
     *
     * @memberof TrackingInfo#
     */
    type = ''

    /**
     * The description of this tracking entry.
     *
     * @memberof TrackingInfo#
     */
    label = ''

    /**
     * The number of milliseconds between January 1, 1970 00:00:00 UTC and when this entry was created.
     *
     * @memberof TrackingInfo#
     */
    start = 0

    /**
     * The number of milliseconds between January 1, 1970 00:00:00 UTC and when this entry was ended.
     *
     * @memberof TrackingInfo#
     */
    stop = 0

    /**
     * The difference in milliseconds between start and stop.
     *
     * @memberof TrackingInfo#
     */
    duration = 0

    /**
     * The number of times this entry has been logged.
     *
     * @memberof TrackingInfo#
     */
    count = 0

    /**
     * Optional additional data associated with this tracking entry.
     *
     * @memberof TrackingInfo#
     * @type {Object.&lt;string, any>}
     */
    data = {}

}

/**
 * Method to stop a running timer and create a timer entry.
 *
 * **NOTE:** This method also creates a [browser performance measure]{@link https://developer.mozilla.org/en-US/docs/Web/API/PerformanceMeasure}
 * with the label that was passed to {@link Tracker#start start}.
 *
 * @global
 * @ignore
 * @callback TimerStopFunction
 * @param {Object.&lt;string, any>} [data] Optional data to include in the timer entry.
 */

/**
 * Starts a timing tree. Unlike the normal {@link Tracker#start start} method, this
 * method does _not_ return a stop function. Instead, it returns an array. The first
 * value in the array is the stop function; the second argument is another start function
 * you can invoke to begin a new nested timing.
 *
 * @ignore
 * @callback NestedStart
 * @param {string} label The label of the nested timer to create.
 * @returns {NestedStartResult} The `[stop, start]` methods you can use to
 * end the current timing or start a nested timing. The first function
 * is a normal {@link TimerStopFunction} and the second function is
 * another {@link NestedTimingTracker#start} function.
 * @example
 * import { tracker } from '~/tracking';
 * import { withNesting } from '@paychex/core/tracker';
 * import { someDataCall, someOtherDataCall } from '~/data/operations';
 *
 * const child = tracker.child();
 * const logger = withNesting(child);
 *
 * export async function loadData(id) {
 *   try {
 *     const [stop, start] = logger.start('load data');
 *     const data = await someDataCall(id);
 *     const results = await loadNestedData(start, data);
 *     stop({ id, results });
 *     return results;
 *   } catch (e) {
 *     logger.error(e);
 *   }
 * }
 *
 * async function loadNestedData(start, data) {
 *   const [stop, ] = start('load nested data');
 *   const results = await someOtherDataCall(data);
 *   stop();
 *   return results;
 * }
 */

/**
 * Array of functions returned by calling {@link NestedTimingTracker#start start}
 * on a {@link NestedTimingTracker} instance. The first function stops the current
 * timer. The second function starts a new nested timer.
 *
 * @class
 * @global
 * @hideconstructor
 */
class NestedStartResult extends Array {

    /**
     * Stops the nested timer.
     *
     * @memberof NestedStartResult#
     * @type {TimerStopFunction}
     */
    [0]

    /**
     * Start a new nested timer.
     *
     * @memberof NestedStartResult#
     * @type {NestedStart}
     */
    [1]

}

/**
 * Provides methods for logging events, errors, and performance.
 *
 * **Best Practices**
 *
 * - Combine {@link Tracker#child tracker.child()} with {@link Tracker#context tracker.context()}
 * to set cross-cutting information specific to your application and to each high-level business
 * process or transaction you have to track. You can create any number of child trackers that
 * inherit settings from their ancestors.
 *
 * @class
 * @global
 * @hideconstructor
 * @example
 * // app/index.js
 *
 * import createTracker from '@paychex/core/tracker';
 *
 * export const tracker = createTracker();
 *
 * tracker.context({
 *   app: 'my-app'
 * });
 * @example
 * // app/components/search.js
 *
 * // import the root tracker with 'app' defined
 * import { tracker } from '../index';
 *
 * import { fetch, createRequest } from '../data';
 * import { rethrow } from '@paychex/core/errors';
 * import { withOrdering, modelList } from '@paychex/core/models';
 *
 * // create a child tracker for use
 * // only within this file
 * const fileTracker = tracker.child();
 *
 * // all calls to child tracker methods
 * // will include this 'component', along
 * // with 'app' set by the root tracker
 * fileTracker.context({
 *   component: 'my-app-search'
 * });
 *
 * const operation = {
 *   base: 'my-app',
 *   path: '/search'
 * };
 *
 * export async function getSearchResults(query) {
 *
 *   // create a child tracker for use only within
 *   // the lifetime of this function (ensures each
 *   // call to this function gets its own context)
 *   const methodTracker = fileTracker.child();
 *
 *   // set data specific to this invocation
 *   methodTracker.context({ query });
 *
 *   // the following event will include 'query'
 *   // and 'component' from ancestor trackers
 *   // as well as 'app' from the root tracker
 *   methodTracker.event('search');
 *
 *   const params = { query };
 *   const stop = methodTracker.start('perform search');
 *   const request = createRequest(operation, params);
 *   const response = await fetch(request).catch(rethrow(params));
 *   const results = response.data;
 *
 *   // the following timer will include 'query',
 *   // 'component', 'app', and -- only on this
 *   // timer -- a 'status' value
 *   stop({ status: results.length ? 'Found' : 'Not Found' });
 *
 *   return withOrdering(modelList(...results), ['priority'], ['desc']);
 * }
 */
export class Tracker {

    /**
     * Generates a random RFC 4122 UUID guaranteed to be unique.
     *
     * @method Tracker#uuid
     * @returns {string} A [RFC 4122 v4 UUID]{@link https://tools.ietf.org/html/rfc4122#section-4.4}
     * @example
     * import { tracker } from '~/tracking';
     * import { proxy } from '~/path/to/data';
     *
     * proxy.use({
     *   headers: {
     *     'x-session-id': tracker.uuid()
     *   },
     *   match: {
     *     base: '^my\-app' // can use regular expression syntax
     *   }
     * });
     */
    uuid() { }

    /**
    * Creates a child Tracker instance.
    *
    * @method Tracker#child
    * @returns {Tracker} A new Tracker instance that will notify the same
    * root subscriber of {@link TrackingInfo} entries, mixing in ancestor
    * contextual data as needed.
    * @example
    * import { tracker } from '~/tracking';
    *
    * // this tracker will inherit any context data
    * // set in landing's tracker while also mixing
    * // in any contextual data of its own
    * export const myAppTracker = tracker.child();
    *
    * myAppTracker.context({ app: 'my-app' });
    * myAppTracker.event('app tracker created');
    */
    child() { }

    /**
    * Sets contextual data to be mixed into each TrackingInfo created
    * by this Tracker or any child Trackers.
    *
    * @method Tracker#context
    * @param {Object.&lt;string, any>} data The data to merge into any
    * {@link TrackingInfo} instances created by this (or child) Tracker
    * methods.
    * @example
    * import get from 'lodash/get';
    * import { store, tracker } from '~/tracking';
    *
    * store.subscribe(() => {
    *   const state = store.getState();
    *   const app = get(state, 'routes.stage');
    *   const drawer = get(state, 'routes.drawer');
    *   tracker.context({ app, drawer });
    * });
    */
    context() { }

    /**
     * Logs an event. Events usually represent important points in an application's
     * lifecycle or user-initiated actions such as button clicks.
     *
     * **NOTE:** This method also creates a [browser performance mark]{@link https://developer.mozilla.org/en-US/docs/Web/API/PerformanceMark} with the given message name.
     *
     * @method Tracker#event
     * @param {string} message The name of the event to log.
     * @param {Object.&lt;string, any>} [data] Optional information to associate with this {@link TrackingInfo}.
     * @example
     * import { tracker } from '~/tracking';
     *
     * window.addEventListener('click', (e) => {
     *   if (e.target.matches('button, a')) {
     *     // could grab additional contextual data
     *     // by looking at ancestor elements' attributes
     *     const type = e.target.tagName.toLowerCase();
     *     tracker.event('click', {
     *       tags: ['ui', type],
     *       label: e.target.innerText
     *     });
     *   }
     * });
     */
    event() { }

    /**
    * Logs an [Error]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error}.
    *
    * @method Tracker#error
    * @param {Error} err The Error instance to log.
    * @example
    * import { tracker } from '~/tracking';
    * import { rethrow } from '@paychex/core/errors';
    *
    * export function doSomething(param) {
    *   somePromiseMethod()
    *     .catch(rethrow({ param }))
    *     .catch(tracker.error);
    * }
    */
    error() { }

    /**
    * Starts a timer to measure performance.
    *
    * @method Tracker#start
    * @param {string} label The name of the timer to create.
    * @returns {TimerStopFunction} Method to invoke to stop and log the timer.
    * @example
    * import { tracker } from '~/tracking';
    *
    * export async function doSomething(param) {
    *   const stop = tracker.start('doSomething');
    *   const results = await somePromiseMethod();
    *   stop({ count: results.length, param });
    *   return results;
    * }
    */
    start() { }

}

/**
 * **NOTE:** The only difference between this class and the normal {@link Tracker}
 * is how the {@link NestedTimingTracker#start start} method works. Creating nested
 * timings introduces new edge cases that are important for you to understand:
 *
 * ### Edge Cases
 * #### Calling stop() Multiple Times
 *
 * Normally, invoking the `stop()` function returned from `start()` multiple times
 * will create a separate timing entry for each invocation and increase the entry's
 * `count` property.
 *
 * With a nested timer, that only holds true for the root timing. For _nested_ timings,
 * calling `stop()` multiple times creates _sibling_ entries, incrementing `count`
 * with each invocation:
 *
 * ```javascript
 * import { tracker } from '~/tracker';
 * import { withNesting } from '@paychex/core/tracker';
 *
 * const logger = withNesting(tracker);
 *
 * async function makeParallelDataCalls(start) {
 *     const [stop] = start('parallel calls');
 *     await Promise.all([
 *         someDataCall().then(() => stop()),
 *         someOtherDataCall().then(() => stop()),
 *         someLastDataCall().then(() => stop())
 *     ]);
 * }
 *
 * export async function loadData() {
 *     const [stop, start] = logger.start('load data');
 *     await makeParallelDataCalls(start);
 *     stop();
 * }
 *
 * // timing tree:
 * {
 *   "id": "9c6f8a25-5003-4b17-b3d6-838144c54a7d",
 *   "label": "load data",
 *   "start": 1562933463457,
 *   "stop": 1562933463490,
 *   "duration": 33,
 *   "type": "timer",
 *   "count": 1,
 *   "data": {
 *     "children": [
 *       {
 *         "label": "parallel calls",
 *         "count": 1,
 *         "start": 1562933463458,
 *         "stop": 1562933463488,
 *         "duration": 30,
 *         "data": {
 *           "children": []
 *         }
 *       },
 *       {
 *         "label": "parallel calls",
 *         "count": 2,
 *         "start": 1562933463458,
 *         "stop": 1562933463490,
 *         "duration": 32,
 *         "data": {
 *           "children": []
 *         }
 *       },
 *       {
 *         "label": "parallel calls",
 *         "count": 3,
 *         "start": 1562933463458,
 *         "stop": 1562933463490,
 *         "duration": 32,
 *         "data": {
 *           "children": []
 *         }
 *       }
 *     ]
 *   }
 * }
 * ```
 *
 * #### Stopping Parents Before Children
 *
 * It is okay for nested timings to stop _after_ an ancestor timing stops. However,
 * when the _root_ timing is stopped, only completed timings will appear in the timing
 * tree. In other words, any nested timings that are still running will _not_ appear
 * in the timing tree.
 *
 * ```javascript
 * import { tracker } from '~/tracker';
 * import { withNesting } from '@paychex/core/tracker';
 *
 * const logger = withNesting(tracker);
 *
 * async function childData(start) {
 *     const [stop] = start('child timing');
 *     await someDataCall();
 *     stop();
 * }
 *
 * export async function loadData() {
 *     const [stop, start] = logger.start('load data');
 *     childData(start); // BUG! we forgot to await this async function!
 *     // because we didn't wait for childData to complete, the next line
 *     // will invoke stop WHILE the async function is still running...
 *     stop();
 * }
 *
 * // timing tree:
 * {
 *   "id": "ca0f72ad-eb9a-4b07-96ec-6292b8d2317f",
 *   "label": "load data",
 *   "start": 1562936590429,
 *   "stop": 1562936590440,
 *   "duration": 11,
 *   "type": "timer",
 *   "count": 1,
 *   "data": {
 *     "children": []
 *   }
 * }
 * ```
 * #### Creating Child Trackers
 *
 * Even on a NestedTimingTracker, calling {@link Tracker#child child()} creates
 * a normal {@link Tracker} instance. So, if you call `start()` on a child Tracker,
 * it will not use nested timings. If you want to combine child Trackers with
 * nested timings, you should change your call order:
 *
 * ```javascript
 * import { tracker } from '~/tracker';
 * import { withNesting } from '@paychex/core/tracker';
 *
 * // INCORRECT ✘
 * const logger = withNesting(tracker);
 * const child = logger.child();
 *
 * // CORRECT ✓
 * const child = tracker.child();
 * const logger = withNesting(child);
 * ```
 *
 * ### Best Practices
 *
 * If you need to create a nested timing, that is a good indication that the
 * code should exist in a separate function. When you call this function, you
 * should pass the nested `start` function so that function can continue the
 * pattern by creating any nested timings it needs (now or in the future):
 *
 * ```javascript
 * import { tracker } from '~/tracker';
 * import { withNesting } from '@paychex/core/tracker';
 *
 * const logger = withNesting(tracker);
 *
 * // INCORRECT ✘
 * export async function loadData() {
 *   const [stop, start] = logger.start('load data');
 *   start('nested timing');
 *   await someDataCall();
 *   stop();
 * }
 *
 * // CORRECT ✓
 * export async function loadData() {
 *   const [stop, start] = logger.start('load data');
 *   await loadChildData(start);
 *   stop();
 * }
 *
 * async function loadChildData(start) {
 *   const [stop, nest] = start('nested timing');
 *   // now we can pass `nest` to another function to
 *   // continue our pattern of creating nested timings
 *   await someDataCall();
 *   stop();
 * }
 * ```
 *
 * @class
 * @global
 * @hideconstructor
 * @augments Tracker
 */
export class NestedTimingTracker extends Tracker {

    /**
     * Starts a timing tree. Unlike the normal {@link Tracker#start start} method, this
     * method does _not_ return a stop function. Instead, it returns an array. The first
     * value in the array is the stop function; the second argument is another start function
     * you can invoke to begin a new nested timing.
     *
     * @override
     * @method NestedTimingTracker#start
     * @param {string} label The label of the nested timer to create.
     * @returns {NestedStartResult} The `[stop, start]` methods you can use to
     * end the current timing or start a nested timing. The first function
     * is a normal {@link TimerStopFunction} and the second function is
     * another {@link NestedTimingTracker#start} function.
     * @example
     * import { tracker } from '~/tracking';
     * import { withNesting } from '@paychex/core/tracker';
     * import { someDataCall, someOtherDataCall } from '~/data/operations';
     *
     * const child = tracker.child();
     * const logger = withNesting(child);
     *
     * export async function loadData(id) {
     *   try {
     *     const [stop, start] = logger.start('load data');
     *     const data = await someDataCall(id);
     *     const results = await loadNestedData(start, data);
     *     stop({ id, results });
     *     return results;
     *   } catch (e) {
     *     logger.error(e);
     *   }
     * }
     *
     * async function loadNestedData(start, data) {
     *   const [stop, ] = start('load nested data');
     *   const results = await someOtherDataCall(data);
     *   stop();
     *   return results;
     * }
     */
    start() { }

}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>

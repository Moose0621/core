<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>types/signals.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/paychex/core" target="_blank" class="menu-item" id="repository" >Source Code</a></h2><h3>Classes</h3><ul><li><a href="Action.html">Action</a><ul class='methods'><li data-type='method'><a href="Action.html#execute">execute</a></li><li data-type='method'><a href="Action.html#failure">failure</a></li><li data-type='method'><a href="Action.html#init">init</a></li><li data-type='method'><a href="Action.html#retry">retry</a></li><li data-type='method'><a href="Action.html#rollback">rollback</a></li><li data-type='method'><a href="Action.html#success">success</a></li></ul></li><li><a href="ActiveModelList.html">ActiveModelList</a><ul class='methods'><li data-type='method'><a href="ActiveModelList.html#active">active</a></li><li data-type='method'><a href="ActiveModelList.html#add">add</a></li><li data-type='method'><a href="ActiveModelList.html#clear">clear</a></li><li data-type='method'><a href="ActiveModelList.html#fire">fire</a></li><li data-type='method'><a href="ActiveModelList.html#items">items</a></li><li data-type='method'><a href="ActiveModelList.html#next">next</a></li><li data-type='method'><a href="ActiveModelList.html#on">on</a></li><li data-type='method'><a href="ActiveModelList.html#one">one</a></li><li data-type='method'><a href="ActiveModelList.html#prev">prev</a></li><li data-type='method'><a href="ActiveModelList.html#remove">remove</a></li><li data-type='method'><a href="ActiveModelList.html#resume">resume</a></li><li data-type='method'><a href="ActiveModelList.html#stop">stop</a></li></ul></li><li><a href="AutoResetSignal.html">AutoResetSignal</a><ul class='methods'><li data-type='method'><a href="AutoResetSignal.html#ready">ready</a></li><li data-type='method'><a href="AutoResetSignal.html#reset">reset</a></li><li data-type='method'><a href="AutoResetSignal.html#set">set</a></li></ul></li><li><a href="Cache.html">Cache</a><ul class='methods'><li data-type='method'><a href="Cache.html#get">get</a></li><li data-type='method'><a href="Cache.html#set">set</a></li></ul></li><li><a href="CountdownSignal.html">CountdownSignal</a><ul class='methods'><li data-type='method'><a href="CountdownSignal.html#decrement">decrement</a></li><li data-type='method'><a href="CountdownSignal.html#increment">increment</a></li><li data-type='method'><a href="CountdownSignal.html#ready">ready</a></li></ul></li><li><a href="DataDefinition.html">DataDefinition</a></li><li><a href="DataLayer.html">DataLayer</a><ul class='methods'><li data-type='method'><a href="DataLayer.html#createRequest">createRequest</a></li><li data-type='method'><a href="DataLayer.html#fetch">fetch</a></li><li data-type='method'><a href="DataLayer.html#setAdapter">setAdapter</a></li></ul></li><li><a href="EncryptionConfiguration.html">EncryptionConfiguration</a></li><li><a href="EventBus.html">EventBus</a><ul class='methods'><li data-type='method'><a href="EventBus.html#fire">fire</a></li><li data-type='method'><a href="EventBus.html#on">on</a></li><li data-type='method'><a href="EventBus.html#one">one</a></li><li data-type='method'><a href="EventBus.html#resume">resume</a></li><li data-type='method'><a href="EventBus.html#stop">stop</a></li></ul></li><li><a href="ExecutionPromise.html">ExecutionPromise</a></li><li><a href="FilteredModelList.html">FilteredModelList</a><ul class='methods'><li data-type='method'><a href="FilteredModelList.html#add">add</a></li><li data-type='method'><a href="FilteredModelList.html#clear">clear</a></li><li data-type='method'><a href="FilteredModelList.html#filterBy">filterBy</a></li><li data-type='method'><a href="FilteredModelList.html#fire">fire</a></li><li data-type='method'><a href="FilteredModelList.html#items">items</a></li><li data-type='method'><a href="FilteredModelList.html#on">on</a></li><li data-type='method'><a href="FilteredModelList.html#one">one</a></li><li data-type='method'><a href="FilteredModelList.html#remove">remove</a></li><li data-type='method'><a href="FilteredModelList.html#resume">resume</a></li><li data-type='method'><a href="FilteredModelList.html#stop">stop</a></li></ul></li><li><a href="GroupedModelList.html">GroupedModelList</a><ul class='methods'><li data-type='method'><a href="GroupedModelList.html#add">add</a></li><li data-type='method'><a href="GroupedModelList.html#clear">clear</a></li><li data-type='method'><a href="GroupedModelList.html#fire">fire</a></li><li data-type='method'><a href="GroupedModelList.html#groupBy">groupBy</a></li><li data-type='method'><a href="GroupedModelList.html#groups">groups</a></li><li data-type='method'><a href="GroupedModelList.html#items">items</a></li><li data-type='method'><a href="GroupedModelList.html#on">on</a></li><li data-type='method'><a href="GroupedModelList.html#one">one</a></li><li data-type='method'><a href="GroupedModelList.html#remove">remove</a></li><li data-type='method'><a href="GroupedModelList.html#resume">resume</a></li><li data-type='method'><a href="GroupedModelList.html#stop">stop</a></li></ul></li><li><a href="InvocationData.html">InvocationData</a></li><li><a href="ManualResetSignal.html">ManualResetSignal</a><ul class='methods'><li data-type='method'><a href="ManualResetSignal.html#ready">ready</a></li><li data-type='method'><a href="ManualResetSignal.html#reset">reset</a></li><li data-type='method'><a href="ManualResetSignal.html#set">set</a></li></ul></li><li><a href="Message.html">Message</a></li><li><a href="MetaData.html">MetaData</a></li><li><a href="ModelList.html">ModelList</a><ul class='methods'><li data-type='method'><a href="ModelList.html#add">add</a></li><li data-type='method'><a href="ModelList.html#clear">clear</a></li><li data-type='method'><a href="ModelList.html#fire">fire</a></li><li data-type='method'><a href="ModelList.html#items">items</a></li><li data-type='method'><a href="ModelList.html#on">on</a></li><li data-type='method'><a href="ModelList.html#one">one</a></li><li data-type='method'><a href="ModelList.html#remove">remove</a></li><li data-type='method'><a href="ModelList.html#resume">resume</a></li><li data-type='method'><a href="ModelList.html#stop">stop</a></li></ul></li><li><a href="NestedStartResult.html">NestedStartResult</a></li><li><a href="NestedTimingTracker.html">NestedTimingTracker</a><ul class='methods'><li data-type='method'><a href="NestedTimingTracker.html#child">child</a></li><li data-type='method'><a href="NestedTimingTracker.html#context">context</a></li><li data-type='method'><a href="NestedTimingTracker.html#error">error</a></li><li data-type='method'><a href="NestedTimingTracker.html#event">event</a></li><li data-type='method'><a href="NestedTimingTracker.html#start">start</a></li><li data-type='method'><a href="NestedTimingTracker.html#uuid">uuid</a></li></ul></li><li><a href="OrderedModelList.html">OrderedModelList</a><ul class='methods'><li data-type='method'><a href="OrderedModelList.html#add">add</a></li><li data-type='method'><a href="OrderedModelList.html#clear">clear</a></li><li data-type='method'><a href="OrderedModelList.html#fire">fire</a></li><li data-type='method'><a href="OrderedModelList.html#items">items</a></li><li data-type='method'><a href="OrderedModelList.html#on">on</a></li><li data-type='method'><a href="OrderedModelList.html#one">one</a></li><li data-type='method'><a href="OrderedModelList.html#orderBy">orderBy</a></li><li data-type='method'><a href="OrderedModelList.html#remove">remove</a></li><li data-type='method'><a href="OrderedModelList.html#resume">resume</a></li><li data-type='method'><a href="OrderedModelList.html#stop">stop</a></li></ul></li><li><a href="PagedModelList.html">PagedModelList</a><ul class='methods'><li data-type='method'><a href="PagedModelList.html#add">add</a></li><li data-type='method'><a href="PagedModelList.html#clear">clear</a></li><li data-type='method'><a href="PagedModelList.html#fire">fire</a></li><li data-type='method'><a href="PagedModelList.html#items">items</a></li><li data-type='method'><a href="PagedModelList.html#nextPage">nextPage</a></li><li data-type='method'><a href="PagedModelList.html#on">on</a></li><li data-type='method'><a href="PagedModelList.html#one">one</a></li><li data-type='method'><a href="PagedModelList.html#pageIndex">pageIndex</a></li><li data-type='method'><a href="PagedModelList.html#pageSize">pageSize</a></li><li data-type='method'><a href="PagedModelList.html#prevPage">prevPage</a></li><li data-type='method'><a href="PagedModelList.html#remove">remove</a></li><li data-type='method'><a href="PagedModelList.html#resume">resume</a></li><li data-type='method'><a href="PagedModelList.html#stop">stop</a></li></ul></li><li><a href="ProcessContext.html">ProcessContext</a><ul class='methods'><li data-type='method'><a href="ProcessContext.html#cancel">cancel</a></li><li data-type='method'><a href="ProcessContext.html#stop">stop</a></li><li data-type='method'><a href="ProcessContext.html#update">update</a></li></ul></li><li><a href="ProcessLogic.html">ProcessLogic</a><ul class='methods'><li data-type='method'><a href="ProcessLogic.html#contextFromArgs">contextFromArgs</a></li><li data-type='method'><a href="ProcessLogic.html#getInitialActions">getInitialActions</a></li><li data-type='method'><a href="ProcessLogic.html#getNextActions">getNextActions</a></li></ul></li><li><a href="ProcessTransition.html">ProcessTransition</a></li><li><a href="ProcessTransitions.html">ProcessTransitions</a></li><li><a href="Proxy.html">Proxy</a><ul class='methods'><li data-type='method'><a href="Proxy.html#apply">apply</a></li><li data-type='method'><a href="Proxy.html#url">url</a></li><li data-type='method'><a href="Proxy.html#use">use</a></li></ul></li><li><a href="ProxyRule.html">ProxyRule</a></li><li><a href="Request.html">Request</a></li><li><a href="Response.html">Response</a></li><li><a href="SelectionModelList.html">SelectionModelList</a><ul class='methods'><li data-type='method'><a href="SelectionModelList.html#add">add</a></li><li data-type='method'><a href="SelectionModelList.html#clear">clear</a></li><li data-type='method'><a href="SelectionModelList.html#fire">fire</a></li><li data-type='method'><a href="SelectionModelList.html#items">items</a></li><li data-type='method'><a href="SelectionModelList.html#on">on</a></li><li data-type='method'><a href="SelectionModelList.html#one">one</a></li><li data-type='method'><a href="SelectionModelList.html#remove">remove</a></li><li data-type='method'><a href="SelectionModelList.html#resume">resume</a></li><li data-type='method'><a href="SelectionModelList.html#selected">selected</a></li><li data-type='method'><a href="SelectionModelList.html#stop">stop</a></li><li data-type='method'><a href="SelectionModelList.html#toggle">toggle</a></li></ul></li><li><a href="Semaphore.html">Semaphore</a><ul class='methods'><li data-type='method'><a href="Semaphore.html#ready">ready</a></li><li data-type='method'><a href="Semaphore.html#release">release</a></li></ul></li><li><a href="Spy.html">Spy</a><ul class='methods'><li data-type='method'><a href="Spy.html#invokes">invokes</a></li><li data-type='method'><a href="Spy.html#onCall">onCall</a></li><li data-type='method'><a href="Spy.html#returns">returns</a></li><li data-type='method'><a href="Spy.html#throws">throws</a></li></ul></li><li><a href="SpyBehaviors.html">SpyBehaviors</a><ul class='methods'><li data-type='method'><a href="SpyBehaviors.html#invokes">invokes</a></li><li data-type='method'><a href="SpyBehaviors.html#returns">returns</a></li><li data-type='method'><a href="SpyBehaviors.html#throws">throws</a></li></ul></li><li><a href="SpyCall.html">SpyCall</a></li><li><a href="Store.html">Store</a><ul class='methods'><li data-type='method'><a href="Store.html#delete">delete</a></li><li data-type='method'><a href="Store.html#get">get</a></li><li data-type='method'><a href="Store.html#set">set</a></li></ul></li><li><a href="Tracker.html">Tracker</a><ul class='methods'><li data-type='method'><a href="Tracker.html#child">child</a></li><li data-type='method'><a href="Tracker.html#context">context</a></li><li data-type='method'><a href="Tracker.html#error">error</a></li><li data-type='method'><a href="Tracker.html#event">event</a></li><li data-type='method'><a href="Tracker.html#start">start</a></li><li data-type='method'><a href="Tracker.html#uuid">uuid</a></li></ul></li><li><a href="TrackingInfo.html">TrackingInfo</a></li><li><a href="Transformer.html">Transformer</a><ul class='methods'><li data-type='method'><a href="Transformer.html#request">request</a></li><li data-type='method'><a href="Transformer.html#response">response</a></li></ul></li><li><a href="UniqueModelList.html">UniqueModelList</a><ul class='methods'><li data-type='method'><a href="UniqueModelList.html#add">add</a></li><li data-type='method'><a href="UniqueModelList.html#clear">clear</a></li><li data-type='method'><a href="UniqueModelList.html#fire">fire</a></li><li data-type='method'><a href="UniqueModelList.html#items">items</a></li><li data-type='method'><a href="UniqueModelList.html#on">on</a></li><li data-type='method'><a href="UniqueModelList.html#one">one</a></li><li data-type='method'><a href="UniqueModelList.html#remove">remove</a></li><li data-type='method'><a href="UniqueModelList.html#resume">resume</a></li><li data-type='method'><a href="UniqueModelList.html#stop">stop</a></li><li data-type='method'><a href="UniqueModelList.html#uniqueBy">uniqueBy</a></li></ul></li><li><a href="UpdatingModelList.html">UpdatingModelList</a><ul class='methods'><li data-type='method'><a href="UpdatingModelList.html#add">add</a></li><li data-type='method'><a href="UpdatingModelList.html#clear">clear</a></li><li data-type='method'><a href="UpdatingModelList.html#fire">fire</a></li><li data-type='method'><a href="UpdatingModelList.html#items">items</a></li><li data-type='method'><a href="UpdatingModelList.html#merge">merge</a></li><li data-type='method'><a href="UpdatingModelList.html#on">on</a></li><li data-type='method'><a href="UpdatingModelList.html#one">one</a></li><li data-type='method'><a href="UpdatingModelList.html#remove">remove</a></li><li data-type='method'><a href="UpdatingModelList.html#resume">resume</a></li><li data-type='method'><a href="UpdatingModelList.html#stop">stop</a></li><li data-type='method'><a href="UpdatingModelList.html#uniqueBy">uniqueBy</a></li><li data-type='method'><a href="UpdatingModelList.html#upsert">upsert</a></li></ul></li><li><a href="XSRFOptions.html">XSRFOptions</a></li></ul><h3>Modules</h3><ul><li><a href="module-data.html">data</a><ul class='methods'><li data-type='method'><a href="module-data.html#.createDataLayer">createDataLayer</a></li><li data-type='method'><a href="module-data.html#.createProxy">createProxy</a></li></ul></li><li><a href="module-data_utils.html">data/utils</a><ul class='methods'><li data-type='method'><a href="module-data_utils.html#.falloff">falloff</a></li><li data-type='method'><a href="module-data_utils.html#.tokenize">tokenize</a></li><li data-type='method'><a href="module-data_utils.html#.withAuthentication">withAuthentication</a></li><li data-type='method'><a href="module-data_utils.html#.withCache">withCache</a></li><li data-type='method'><a href="module-data_utils.html#.withConnectivity">withConnectivity</a></li><li data-type='method'><a href="module-data_utils.html#.withDiagnostics">withDiagnostics</a></li><li data-type='method'><a href="module-data_utils.html#.withHeaders">withHeaders</a></li><li data-type='method'><a href="module-data_utils.html#.withRetry">withRetry</a></li><li data-type='method'><a href="module-data_utils.html#.withSignal">withSignal</a></li><li data-type='method'><a href="module-data_utils.html#.withTransform">withTransform</a></li><li data-type='method'><a href="module-data_utils.html#.withXSRF">withXSRF</a></li></ul></li><li><a href="module-errors.html">errors</a><ul class='methods'><li data-type='method'><a href="module-errors.html#.error">error</a></li><li data-type='method'><a href="module-errors.html#.fatal">fatal</a></li><li data-type='method'><a href="module-errors.html#.ignore">ignore</a></li><li data-type='method'><a href="module-errors.html#.rethrow">rethrow</a></li></ul></li><li><a href="module-index.html">index</a><ul class='methods'><li data-type='method'><a href="module-index.html#~buffer">buffer</a></li><li data-type='method'><a href="module-index.html#~eventBus">eventBus</a></li><li data-type='method'><a href="module-index.html#~invokeIf">invokeIf</a></li><li data-type='method'><a href="module-index.html#~parallel">parallel</a></li><li data-type='method'><a href="module-index.html#~sequence">sequence</a></li></ul></li><li><a href="module-models.html">models</a><ul class='methods'><li data-type='method'><a href="module-models.html#.modelList">modelList</a></li><li data-type='method'><a href="module-models.html#.withActive">withActive</a></li><li data-type='method'><a href="module-models.html#.withFiltering">withFiltering</a></li><li data-type='method'><a href="module-models.html#.withGrouping">withGrouping</a></li><li data-type='method'><a href="module-models.html#.withOrdering">withOrdering</a></li><li data-type='method'><a href="module-models.html#.withPaging">withPaging</a></li><li data-type='method'><a href="module-models.html#.withSelection">withSelection</a></li><li data-type='method'><a href="module-models.html#.withUnique">withUnique</a></li><li data-type='method'><a href="module-models.html#.withUpdating">withUpdating</a></li></ul></li><li><a href="module-process.html">process</a><ul class='methods'><li data-type='method'><a href="module-process.html#.action">action</a></li><li data-type='method'><a href="module-process.html#.dependencies">dependencies</a></li><li data-type='method'><a href="module-process.html#.process">process</a></li><li data-type='method'><a href="module-process.html#.run">run</a></li><li data-type='method'><a href="module-process.html#.transitions">transitions</a></li></ul></li><li><a href="module-signals.html">signals</a><ul class='methods'><li data-type='method'><a href="module-signals.html#.autoReset">autoReset</a></li><li data-type='method'><a href="module-signals.html#.countdown">countdown</a></li><li data-type='method'><a href="module-signals.html#.manualReset">manualReset</a></li><li data-type='method'><a href="module-signals.html#.semaphore">semaphore</a></li></ul></li><li><a href="module-stores.html">stores</a><ul class='methods'><li data-type='method'><a href="module-stores.html#.memoryStore">memoryStore</a></li></ul></li><li><a href="module-stores_utils.html">stores/utils</a><ul class='methods'><li data-type='method'><a href="module-stores_utils.html#.asDataCache">asDataCache</a></li><li data-type='method'><a href="module-stores_utils.html#.days">days</a></li><li data-type='method'><a href="module-stores_utils.html#.hours">hours</a></li><li data-type='method'><a href="module-stores_utils.html#.minutes">minutes</a></li><li data-type='method'><a href="module-stores_utils.html#.weeks">weeks</a></li><li data-type='method'><a href="module-stores_utils.html#.withEncryption">withEncryption</a></li><li data-type='method'><a href="module-stores_utils.html#.withExpiration">withExpiration</a></li><li data-type='method'><a href="module-stores_utils.html#.withPrefix">withPrefix</a></li></ul></li><li><a href="module-test.html">test</a><ul class='methods'><li data-type='method'><a href="module-test.html#.spy">spy</a></li></ul></li><li><a href="module-tracker.html">tracker</a><ul class='methods'><li data-type='method'><a href="module-tracker.html#.createTracker">createTracker</a></li><li data-type='method'><a href="module-tracker.html#.withNesting">withNesting</a></li></ul></li><li><a href="module-tracker_utils.html">tracker/utils</a><ul class='methods'><li data-type='method'><a href="module-tracker_utils.html#~withReplacement">withReplacement</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-Promise.html">Promise</a></li></ul><h3>Events</h3><ul><li><a href="ActiveModelList.html#~event:active-change">active-change</a></li><li><a href="FilteredModelList.html#~event:filter-change">filter-change</a></li><li><a href="GroupedModelList.html#~event:group-change">group-change</a></li><li><a href="ModelList.html#~event:items-add">items-add</a></li><li><a href="ModelList.html#~event:items-remove">items-remove</a></li><li><a href="OrderedModelList.html#~event:order-change">order-change</a></li><li><a href="PagedModelList.html#~event:page-change">page-change</a></li><li><a href="SelectionModelList.html#~event:selection-change">selection-change</a></li><li><a href="UniqueModelList.html#~event:unique-change">unique-change</a></li><li><a href="UpdatingModelList.html#~event:items-update">items-update</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Adapter">Adapter</a></li><li><a href="global.html#Fetch">Fetch</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">types/signals.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Queues all callers until signaled. Once signaled, all callers proceed in the
 * order they were queued. Future callers will proceed immediately while this
 * object remains in a signaled state.
 *
 * Think of the manual reset signal as a traffic light. While it is red, all cars
 * are queued in the order they arrive. Once the light is signaled green, the cars
 * can proceed in the order they arrived. And as long as the light remains green,
 * any future cars can proceed.
 *
 * @class
 * @global
 * @hideconstructor
 * @example
 * import { manualReset } from '@paychex/core/signals';
 *
 * const signal = manualReset();
 *
 * export function bootstrap() {
 *   // do some preliminary stuff
 *   signal.set(); // unblock any callers
 * }
 *
 * export async function doSomething() {
 *   // block callers until signaled:
 *   await signal.ready();
 *   // bootstrap has now been called and
 *   // completed, so we can safely perform
 *   // an operation here
 * }
 * @example
 * // simple pause/resume functionality
 *
 * import { manualReset } from '@paychex/core/signals';
 *
 * const signal = manualReset(true); // start unblocked
 *
 * export async function doSomething() {
 *   await signal.ready();
 *   // do stuff here
 * }
 *
 * export function pause() {
 *   signal.reset();
 * }
 *
 * export function resume() {
 *   signal.set();
 * }
 */
export class ManualResetSignal {

    /**
     * Places the signal into a signaled state. This invokes any queued callers
     * in the order they were queued and allows future callers to proceed immediately.
     *
     * @method ManualResetSignal#set
     * @example
     * import { manualReset } from '@paychex/core/signals';
     * import { rethrow, ignore } from '@paychex/core/errors';
     * import { tracker } from '../path/to/tracker';
     *
     * const signal = manualReset(); // starts blocked
     *
     * export async function bootstrap() {
     *   // do bootstrap stuff here
     *   signal.set(); // unblock the signal
     * }
     *
     * export function onReady(callback) {
     *   signal.ready() // block until signaled
     *     .then(callback)
     *     .catch(rethrow(ignore()))
     *     .catch(tracker.error);
     * }
     */
    set() { }

    /**
     * Places the signal into a blocked (unsignaled) state. This begins queueing
     * any future callers.
     *
     * @method ManualResetSignal#reset
     * @example
     * // simple pause/resume functionality
     *
     * import { manualReset } from '@paychex/core/signals';
     *
     * const signal = manualReset(true); // start unblocked
     *
     * export async function doSomething() {
     *   await signal.ready();
     *   // do stuff here
     * }
     *
     * export function pause() {
     *   signal.reset();
     * }
     *
     * export function resume() {
     *   signal.set();
     * }
     */
    reset() { }

    /**
     * Queues the caller until the signal is placed into a signaled state.
     *
     * @method ManualResetSignal#ready
     * @returns {Promise} A Promise that will be resolved when the signal is placed
     * into a signaled state.
     * @example
     * import { manualReset } from '@paychex/core/signals';
     * import { rethrow, ignore } from '@paychex/core/errors';
     * import { tracker } from '../path/to/tracker';
     *
     * const signal = manualReset(); // starts blocked
     *
     * export async function bootstrap() {
     *   // do bootstrap stuff here
     *   signal.set(); // unblock the signal
     * }
     *
     * export function onReady(callback) {
     *   signal.ready() // block until signaled
     *     .then(callback)
     *     .catch(rethrow(ignore()))
     *     .catch(tracker.error);
     * }
     */
    ready() { }

}


/**
 * Releases 1 queued caller each time it is signaled.
 *
 * The auto reset signal can be used to create a `critical section` -- i.e. a block
 * of code that can only be executed by 1 caller at a time. Every other caller will
 * be queued in the order they arrive, and the next caller in the queue will only
 * be allowed to enter the critical section when the previous caller leaves the
 * critical section.
 *
 * @class
 * @global
 * @hideconstructor
 * @example
 * import { autoReset } from '@paychex/core/signals';
 * import { fetch, createRequest } from '../path/to/datalayer';
 *
 * const signal = autoReset(true); // start unblocked
 * const operation = {
 *   method: 'POST',
 *   base: 'my-app',
 *   path: '/some/endpoint'
 * };
 *
 * // ensure each network call completes
 * // before the next call is performed:
 * export async function networkCall() {
 *   await signal.ready(); // blocks other callers
 *   try {
 *     const data = { ... }; // payload to POST to the endpoint
 *     const request = createRequest(operation, null, data);
 *     const response = await fetch(request);
 *     return response.data;
 *   } finally {
 *     signal.set(); // unblock the next caller
 *   }
 * }
 */
export class AutoResetSignal {

    /**
     * Places the signal into a signaled state. This will release only 1 queued caller
     * and then immediately reset the signal.
     *
     * @method AutoResetSignal#set
     * @example
     * import { autoReset } from '@paychex/core/signals';
     *
     * const signal = autoReset(true); // start unblocked
     *
     * export async function doSomething() {
     *   await signal.ready(); // blocks other callers
     *   try {
     *     // critical section here
     *   } finally {
     *     signal.set(); // unblock the signal so the next caller can proceed
     *   }
     * }
     */
    set() { }

    /**
     * Places the signal into a blocked (unsignaled) state. This begins queueing
     * any future callers.
     *
     * **NOTE:** You often won't need to call this method directly since this
     * signal will reset automatically each time it is set.
     *
     * @method AutoResetSignal#reset
     * @example
     * import { autoReset } from '@paychex/core/signals';
     *
     * const signal = autoReset(true); // start unblocked
     *
     * export async function doSomething() {
     *   await signal.ready();
     *   // do stuff here
     *   signal.set();
     * }
     *
     * export function cancel() {
     *   // this perpetually blocks the signal
     *   // unless set() gets called again
     *   signal.reset();
     * }
     */
    reset() { }

    /**
     * Queues the caller until the signal is placed into a signaled state.
     *
     * @method AutoResetSignal#ready
     * @returns {Promise} A Promise that will be resolved when the signal is placed
     * into a signaled state.
     * @example
     * import { autoReset } from '@paychex/core/signals';
     *
     * const signal = autoReset(true); // start unblocked
     *
     * export async function doSomething() {
     *   await signal.ready(); // blocks other callers
     *   try {
     *     // critical section here
     *   } finally {
     *     signal.set(); // unblock the signal so the next caller can proceed
     *   }
     * }
     */
    ready() { }

}

/**
 * Queues callers until the counter reaches 0.
 *
 * @class
 * @global
 * @hideconstructor
 * @example
 * import { countdown } from '@paychex/core/signals';
 *
 * export function downloadAll(files = []) {
 *   const signal = countdown(files.length);
 *   files.forEach(file =>
 *     download(file).finally(() =>
 *       signal.decrement()));
 *   return signal.ready();
 * }
 * @example
 * import { countdown } from '@paychex/core/signals';
 * import { registry } from '../some/component/registry';
 *
 * const signal = countdown();
 *
 * export function loadComponent(component) {
 *   if (component in registry) {
 *     signal.increment();
 *     const script = document.createElement('script');
 *     script.async = true;
 *     script.type = 'text/javascript';
 *     script.src = registry[component];
 *     script.onload = () => signal.decrement(); // countdown
 *     document.body.appendChild(script);
 *   }
 *   return signal.ready();
 * }
 */
export class CountdownSignal {

    /**
     * Places the signal into a blocked state. The signal will need to be decremented
     * by a corresponding amount in order to unblock it.
     *
     * @method CountdownSignal#increment
     * @param {number} [count=1] The number to add to the internal counter. Must be a positive integer.
     * @example
     * import { countdown } from '@paychex/core/signals';
     *
     * const signal = countdown();
     *
     * export function appendFilesToDownload(files = []) {
     *   signal.increment(files.length);
     *   files.forEach(file =>
     *     download(file).finally(() =>
     *       signal.decrement()));
     *   return signal.ready();
     * }
     */
    increment() { }

    /**
     * Subtracts the specified amount from the counter. When the counter reaches 0 it
     * will be placed into an unblocked state, enabling any queued callers to proceed.
     *
     * @method CountdownSignal#decrement
     * @param {number} [count=1] The number to subtract from the internal counter. Must be a positive integer.
     * @example
     * import { countdown } from '@paychex/core/signals';
     *
     * const signal = countdown(3);
     *
     * async function doTask1() {
     *   // do stuff
     *   signal.decrement();
     * }
     *
     * async function doTask2() {
     *   // do stuff
     *   signal.decrement();
     * }
     *
     * async function doTask3() {
     *   // do stuff
     *   signal.decrement();
     * }
     *
     * doTask1();
     * doTask2();
     * doTask3();
     *
     * export function ready() {
     *   return signal.ready();
     * }
     */
    decrement() { }

    /**
     * Queues the caller until the counter reaches 0. Once the counter reaches 0, all
     * callers will be invoked in the order they were queued.
     *
     * @method CountdownSignal#ready
     * @returns {Promise} A Promise that will be resolved when the counter reaches 0.
     * @example
     * import { countdown } from '@paychex/core/signals';
     *
     * export function downloadAll(files = []) {
     *   const signal = countdown(files.length);
     *   files.forEach(file =>
     *     download(file).finally(() =>
     *       signal.decrement()));
     *   return signal.ready();
     * }
     */
    ready() { }

}

/**
 * Limits access to a pool of resources by restricting how many callers can run at a time.
 * Any callers above the allowed amount will be queued until a spot is released.
 *
 * **Best Practices**
 *
 * - Whether your operation succeeds or fails, _always_ call {@link Semaphore#release release()}
 * to ensure the next caller can proceed. Calling `release()` inside a `finally` block makes this easy.
 * See the example below.
 *
 * @class
 * @global
 * @hideconstructor
 * @example
 * import { semaphore } from '@paychex/core/signals';
 * import { fetch, createRequest } from '~/path/to/datalayer';
 * import { tracker } from '~/path/to/tracker';
 *
 * const uploadSpots = semaphore(5);
 * const operation = {
 *   base: 'files',
 *   method: 'POST',
 *   path: '/save/:id'
 * };
 *
 * export async function uploadFile(blob) {
 *   const data = new FormData();
 *   const params = { id: tracker.uuid() };
 *   data.append('file', blob, params.id);
 *   try {
 *     await uploadSpots.ready();
 *     await fetch(createRequest(operation, params, data));
 *     return params.id;
 *   } finally {
 *     uploadSpots.release(); // always release
 *   }
 * }
 */
export class Semaphore {

    /**
     * The number of spots currently available for callers before they will be queued.
     *
     * @member Semaphore#available
     * @type {number}
     * @example
     * import { semaphore } from '@paychex/core/signals';
     *
     * const spots = semaphore(10);
     *
     * spots.ready().then(doSomething).finally(spots.release);
     *
     * console.log(spots.queued); // 0
     * console.log(spots.running); // 1
     * console.log(spots.available); // 9
     */
    available = 0

    /**
     * The number of callers currently running. Callers must always remember to call
     * {@link Semaphore#release release()} when done to ensure this number
     * is decremented appropriately.
     *
     * @member Semaphore#running
     * @type {number}
     * @example
     * import { semaphore } from '@paychex/core/signals';
     *
     * const spots = semaphore(10);
     *
     * spots.ready().then(doSomething).finally(spots.release);
     *
     * console.log(spots.queued); // 0
     * console.log(spots.running); // 1
     * console.log(spots.available); // 9
     */
    running = 0

    /**
     * The number of callers that are still waiting to run.
     *
     * @member Semaphore#queued
     * @type {number}
     * @example
     * import { semaphore } from '@paychex/core/signals';
     *
     * const spots = semaphore(2);
     *
     * spots.ready().then(doSomething).finally(spots.release);
     * spots.ready().then(doSomethingElse).finally(spots.release);
     * spots.ready().then(doAnotherThing).finally(spots.release);
     *
     * console.log(spots.queued); // 1
     * console.log(spots.running); // 2
     * console.log(spots.available); // 0
     */
    queued = 0

    /**
     * Notifies the semaphore that the given number of slots have become available.
     * If any callers have been queued, they will be run in the newly available slots.
     *
     * @method Semaphore#release
     * @param {number} [count=1] The number to spots to make available.
     * @example
     * import { semaphore } from '@paychex/core/signals';
     *
     * const spots = semaphore(2);
     *
     * spots.ready()
     *   .then(doSomething)
     *   .finally(spots.release);
     * @example
     * import { semaphore } from '@paychex/core/signals';
     *
     * const spots = semaphore();
     *
     * Promise.all([
     *   spots.ready().then(firstOperation),
     *   spots.ready().then(secondOperation)
     * ]).finally(() => spots.release(2));
     * @example
     * import { semaphore } from '@paychex/core/signals';
     *
     * const spots = semaphore(10);
     *
     * export async function doSomething() {
     *   await spots.ready();
     *   try {
     *     // code
     *   } finally {
     *     spots.release();
     *   }
     * }
     */
    release() { }

    /**
     * Queues the caller until a spot is available.
     *
     * @method Semaphore#ready
     * @returns {Promise} A Promise that will be resolved when a slot is available.
     * @example
     * import { semaphore } from '@paychex/core/signals';
     *
     * const spots = semaphore(2);
     *
     * export async function doSomething() {
     *   await spots.ready();
     *   try {
     *     // do stuff
     *   } finally {
     *     spots.release();
     *   }
     * }
     */
    ready() { }

}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
